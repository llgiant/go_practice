package main

import (
	"fmt"
	"math"
)

/*
//Task1
type Item struct {
	Name  *string //–ø–æ—á–µ–º—É –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç—É—Ç *
	Price int
}

func updateItems(item *Item, newName string, newPrice int) {
	item.Name = &newName //–ø–æ—á–µ–º—É –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç—É—Ç &
	item.Price = newPrice
}

func main() {
	defaultName := "Book"
	item := &Item{
		Name:  &defaultName,
		Price: 1000,
	}

	secondaryItem := Item{}
	fmt.Println(*item.Name)
	updateItems(item, "new book", 2000)

	fmt.Println(secondaryItem)
	fmt.Println(item)
	fmt.Println(*item.Name)
}


# ‚úÖ **1. –ü–æ—á–µ–º—É –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `Item` –ø–æ–ª–µ `Name` ‚Äî —ç—Ç–æ `*string`?**


```go
type Item struct {
    Name  *string
    Price int
}
```

### –¢—ã —Ö—Ä–∞–Ω–∏—à **—É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä–æ–∫—É**, –∞ –Ω–µ —Å–∞–º—É —Å—Ç—Ä–æ–∫—É, –ø–æ—Ç–æ–º—É —á—Ç–æ:

1. **–•–æ—á–µ—à—å –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–µ–Ω—è—Ç—å –∏–º—è –≤–Ω–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**
–ï—Å–ª–∏ –±—ã –±—ã–ª–æ `Name string`, —Ç–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç—ã –±—ã –∫–æ–ø–∏—Ä–æ–≤–∞–ª —Å—Ç—Ä–æ–∫—É.
–ê —Å–æ `*string` —Ç—ã —Ö—Ä–∞–Ω–∏—à—å —Å—Å—ã–ª–∫—É ‚Äî –º–µ–Ω—è–µ—à—å —Ç–æ, –Ω–∞ —á—Ç–æ –æ–Ω–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç.

2. **–≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ –≤ JSON, –ë–î –º–æ–¥–µ–ª—è—Ö)**
–°—Ç—Ä–æ–∫–∏ ‚Äî –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ (`immutable`).
–ü—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ `Item` —Å—Ç—Ä–æ–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–ª–∞—Å—å –±—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é.
–ê —É–∫–∞–∑–∞—Ç–µ–ª—å ‚Äî —ç—Ç–æ –≤—Å–µ–≥–æ 8 –±–∞–π—Ç (64-bit arch).

3. **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ‚Äú–ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ‚Äù ‚Üí `nil`**
–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã—Ä–∞–∑–∏—Ç—å:

* ‚Äú–∏–º—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç‚Äù
* ‚Äú–∏–º—è –Ω–µ –∑–∞–¥–∞–≤–∞–ª–æ—Å—å‚Äù
* ‚Äú–Ω—É–∂–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å –∏–º—è‚Äù
–¢–æ –µ—Å—Ç—å **—É–∫–∞–∑—ã–≤–∞–µ—à—å –Ω–∞–º–µ—Ä–µ–Ω–∏–µ**, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É.

üìå –≠—Ç–æ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ API –º–æ–¥–µ–ª—è—Ö, DTO, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ö.

---

# ‚úÖ **2. –ü–æ—á–µ–º—É –≤ `updateItems` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `&newName`?**

```go
func updateItems(item *Item, newName string, newPrice int) {
    item.Name = &newName
}
```

–ó–¥–µ—Å—å `newName` ‚Äî –æ–±—ã—á–Ω–∞—è —Å—Ç—Ä–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏.

* `newName` –∂–∏–≤—ë—Ç **–Ω–∞ —Å—Ç–µ–∫–µ** –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏.
* –Ω–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä Go *–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏* –≤—ã–Ω–µ—Å–µ—Ç –µ—ë –≤ **heap**, –µ—Å–ª–∏ —Ç—ã –¥–µ–ª–∞–µ—à—å `&newName`.

–¢–æ –µ—Å—Ç—å `&` –æ–∑–Ω–∞—á–∞–µ—Ç:

> ‚Äú–¥–∞–π –º–Ω–µ –∞–¥—Ä–µ—Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π‚Äù

–ò–º–µ–Ω–Ω–æ –ø–æ—Ç–æ–º—É —á—Ç–æ `Name` –æ–∂–∏–¥–∞–µ—Ç `*string`, –∞ `newName` ‚Äî –Ω–µ —É–∫–∞–∑–∞—Ç–µ–ª—å.

---

# üî• **3. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –ø–∞–º—è—Ç–∏ (–æ—á–µ–Ω—å –≤–∞–∂–Ω–æ –ø–æ–Ω—è—Ç—å)**

### –í `main`:

```go
defaultName := "Book"
item := &Item{
    Name:  &defaultName,
    Price: 1000,
}
```

–ü–∞–º—è—Ç—å:

```
defaultName ---> "Book"
item.Name ------^
```

### –ü–æ—Ç–æ–º:

```go
secondaryItem := item
```

–û–±–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ **–æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ struct –≤ heap**:

```
secondaryItem ----\
                   --> [Item struct in heap]
item ------------/
```

–û–Ω–∏ ‚Äî –¥–≤–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç.

---

# üî• **4. –ü–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ `updateItems(item, defaultName, 2000)`**

–í–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è:

```
newName (—Å—Ç—Ä–æ–∫–∞ "Book")
newPrice = 2000
```

–ö–æ–≥–¥–∞ —Ç—ã –¥–µ–ª–∞–µ—à—å:

```go
item.Name = &newName
```

—Ç–æ —Ç–µ–ø–µ—Ä—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ *–Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å —Å—Ç—Ä–æ–∫–∏*:

```
newName ---> "Book" (–∫–æ–ø–∏—è, –Ω–æ —á–∞—Å—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)
item.Name -----^
```

–ê `Price` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `2000`.

–ò **secondaryItem –≤–∏–¥–∏—Ç —Ç–æ –∂–µ —Å–∞–º–æ–µ**, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç.

---

# üìå –í—ã–≤–æ–¥: –ø–æ—á–µ–º—É & –Ω—É–∂–µ–Ω?

### `item.Name = &newName`

–ü–æ—Ç–æ–º—É —á—Ç–æ:

1. **–ü–æ–ª–µ Name ‚Äî —É–∫–∞–∑–∞—Ç–µ–ª—å** (`*string`)
2. –¢—ã –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—à—å **–∞–¥—Ä–µ—Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `newName`**
3. Go –≤—ã–¥–µ–ª—è–µ—Ç –ø–∞–º—è—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç–µ–ª—å –æ—Å—Ç–∞–≤–∞–ª—Å—è –≤–∞–ª–∏–¥–Ω—ã–º –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏
‚Üí escape analysis ‚Üí —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –≤ heap

---

# üß† –ú–∏–Ω–∏-–æ—Ç–≤–µ—Ç—ã

### ‚ùì–ü–æ—á–µ–º—É `Name *string`, –∞ –Ω–µ `string`?

–ß—Ç–æ–±—ã:

* –∏–∑–º–µ–Ω—è—Ç—å —Å—Ç—Ä–æ–∫—É —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å
* —ç–∫–æ–Ω–æ–º–∏—Ç—å –ø–∞–º—è—Ç—å
* –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å `nil`

### ‚ùì–ü–æ—á–µ–º—É `item.Name = &newName`?

–ü–æ—Ç–æ–º—É —á—Ç–æ –ø–æ–ª–µ –æ–∂–∏–¥–∞–µ—Ç `*string`, –∞ —Ç—ã –ø–µ—Ä–µ–¥–∞—ë—à—å –∞–¥—Ä–µ—Å –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π.

---

# üìå –ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞?

```go
&{0xc000010230 2000}
&{0xc000010230 2000}
```

(–∞–¥—Ä–µ—Å –±—É–¥–µ—Ç –¥—Ä—É–≥–æ–π, –ø—Ä–∏–º–µ—Ä)

–û–±–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç.
*/

type Shape interface {
	Area() float64
}

type Cyrcle struct {
	R float64
}

func (c Cyrcle) Area() float64 {
	return math.Pi * c.R * c.R
}

func (c Cyrcle) SetR(r float64) {
	c.R = r
}

func GetArea(s Shape) float64 {
	return s.Area()
}

func main() {
	c := &Cyrcle{10}
	fmt.Println(GetArea(c))
	c.SetR(15)
	fmt.Println(GetArea(c))
}
